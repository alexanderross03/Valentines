<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>Will You Be My Valentine? üíï</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Bubblegum+Sans&family=Patrick+Hand&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: #fff0f3;
      --pink: #ff6b8a;
      --pink-dark: #e0455e;
      --red: #ff2d55;
      --rose: #ffc2d1;
      --text: #4a2040;
      --text-light: #8a5070;
      --no-btn: #d4d4d4;
      --white: #ffffff;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      min-height: 100dvh;
      display: flex;
      align-items: center;
      justify-content: center;
      background: var(--bg);
      font-family: 'Patrick Hand', cursive;
      overflow: hidden;
      position: relative;
      color: var(--text);
    }

    /* ============ FLOATING HEARTS BACKGROUND ============ */
    #bg-hearts {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 0;
      overflow: hidden;
    }

    #bg-hearts span {
      position: absolute;
      bottom: -10%;
      opacity: 0;
      animation: float-up var(--dur) var(--del) infinite ease-in-out;
      will-change: transform, opacity;
    }

    @keyframes float-up {
      0% {
        transform: translateY(0) rotate(0deg) scale(1);
        opacity: 0;
      }
      10% {
        opacity: 0.6;
      }
      50% {
        opacity: 0.8;
        transform: translateY(-50vh) rotate(var(--rot, 15deg)) scale(1.1);
      }
      90% {
        opacity: 0.3;
      }
      100% {
        transform: translateY(-110vh) rotate(calc(var(--rot, 15deg) * -1)) scale(0.8);
        opacity: 0;
      }
    }

    /* ============ SCREENS ============ */
    .screen {
      position: absolute;
      inset: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 2rem;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.7s ease;
      z-index: 1;
    }

    .screen.active {
      opacity: 1;
      pointer-events: auto;
    }

    /* ============ ASK SCREEN ============ */
    .character {
      margin-bottom: 0.5rem;
      animation: wiggle 3s ease-in-out infinite;
      filter: drop-shadow(0 4px 12px rgba(255, 107, 138, 0.3));
    }

    .character img {
      width: clamp(150px, 35vw, 280px);
      height: auto;
      border-radius: 16px;
    }

    @keyframes wiggle {
      0%, 100% { transform: rotate(-3deg); }
      50% { transform: rotate(3deg); }
    }

    .title {
      font-family: 'Bubblegum Sans', 'Comic Sans MS', cursive;
      font-size: clamp(1.8rem, 5vw, 3.2rem);
      color: var(--text);
      text-align: center;
      margin-bottom: 0.5rem;
      text-shadow: 2px 2px 0 rgba(255, 107, 138, 0.2);
    }

    .subtitle {
      font-size: clamp(1.1rem, 3vw, 1.5rem);
      color: var(--text-light);
      text-align: center;
      margin-bottom: 2rem;
      min-height: 2em;
      transition: all 0.3s ease;
    }

    .buttons {
      display: flex;
      gap: 1.2rem;
      align-items: center;
      justify-content: center;
      position: relative;
      flex-wrap: wrap;
    }

    .btn {
      font-family: 'Bubblegum Sans', cursive;
      font-size: clamp(1.1rem, 3vw, 1.5rem);
      border: none;
      border-radius: 50px;
      padding: 0.8rem 2.2rem;
      cursor: pointer;
      transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1),
                  background 0.2s ease,
                  box-shadow 0.2s ease,
                  font-size 0.3s ease,
                  padding 0.3s ease,
                  opacity 0.3s ease;
      user-select: none;
      -webkit-tap-highlight-color: transparent;
      touch-action: manipulation;
    }

    .btn-yes {
      background: var(--pink);
      color: var(--white);
      box-shadow: 0 4px 20px rgba(255, 107, 138, 0.4);
      animation: pulse-grow 2s ease-in-out infinite;
      z-index: 2;
    }

    .btn-yes:hover {
      background: var(--pink-dark);
      box-shadow: 0 6px 28px rgba(255, 107, 138, 0.5);
    }

    .btn-yes:active {
      transform: scale(0.95);
    }

    @keyframes pulse-grow {
      0%, 100% { transform: scale(var(--yes-scale, 1)); }
      50% { transform: scale(calc(var(--yes-scale, 1) * 1.06)); }
    }

    .btn-no {
      background: var(--no-btn);
      color: #666;
      box-shadow: none;
      z-index: 2;
    }

    .btn-no:hover {
      background: #bbb;
    }

    .btn-no.runaway {
      position: fixed;
      transition: none;
    }

    /* ============ SUCCESS SCREEN ============ */
    #success-screen {
      background: linear-gradient(180deg, #d6eaf8 0%, #ebf5fb 40%, #f4f9fd 100%);
      z-index: 10;
      overflow: hidden;
    }

    /* Snowflakes */
    #success-screen .snowflake {
      position: absolute;
      color: #fff;
      opacity: 0;
      font-size: var(--size, 1rem);
      animation: snowfall var(--dur) var(--del) linear infinite;
      pointer-events: none;
      text-shadow: 0 0 4px rgba(180, 210, 240, 0.6);
    }

    @keyframes snowfall {
      0% {
        transform: translateY(-10vh) translateX(0) rotate(0deg);
        opacity: 0;
      }
      10% { opacity: 0.8; }
      90% { opacity: 0.6; }
      100% {
        transform: translateY(110vh) translateX(var(--sway, 20px)) rotate(360deg);
        opacity: 0;
      }
    }

    #confetti-container {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 0;
      overflow: hidden;
    }

    .confetti-piece {
      position: absolute;
      top: -20px;
      left: var(--x);
      width: var(--size);
      height: var(--size);
      background: var(--color);
      opacity: 0;
      animation: confetti-fall var(--fall-dur) var(--fall-del) ease-in forwards;
      will-change: transform, opacity;
    }

    .confetti-piece.heart {
      background: none;
      font-size: var(--size);
      line-height: 1;
      width: auto;
      height: auto;
    }

    @keyframes confetti-fall {
      0% {
        transform: translateY(0) rotate(0deg) translateX(0);
        opacity: 1;
      }
      25% {
        transform: translateY(25vh) rotate(180deg) translateX(var(--sway));
        opacity: 1;
      }
      50% {
        transform: translateY(50vh) rotate(360deg) translateX(calc(var(--sway) * -0.5));
        opacity: 0.8;
      }
      75% {
        transform: translateY(75vh) rotate(540deg) translateX(var(--sway));
        opacity: 0.5;
      }
      100% {
        transform: translateY(105vh) rotate(720deg) translateX(0);
        opacity: 0;
      }
    }

    .success-content {
      position: relative;
      z-index: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
    }

    .success-gif {
      margin-bottom: 1rem;
      animation: bounce-in 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) 0.3s both;
    }

    .success-gif img {
      width: clamp(180px, 40vw, 320px);
      height: auto;
      border-radius: 16px;
      box-shadow: 0 6px 30px rgba(133, 193, 233, 0.45);
    }

    .success-title {
      font-family: 'Bubblegum Sans', cursive;
      font-size: clamp(1.8rem, 5vw, 3rem);
      color: var(--text);
      text-shadow: 2px 2px 0 rgba(133, 193, 233, 0.3);
      animation: bounce-in 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) 0.6s both;
    }

    .success-subtitle {
      font-size: clamp(1.1rem, 3vw, 1.5rem);
      color: var(--text-light);
      margin-top: 0.8rem;
      animation: fade-in 0.6s ease 1.2s both;
    }

    .success-emoji {
      font-size: clamp(3rem, 8vw, 5rem);
      margin-top: 1.5rem;
      animation: spin-float 4s ease-in-out infinite, fade-in 0.6s ease 1.5s both;
    }

    .gift-card {
      margin-top: 2rem;
      padding: 1.2rem;
      border-radius: 16px;
      background: rgba(255, 255, 255, 0.6);
      backdrop-filter: blur(4px);
      text-align: center;
      text-decoration: none;
      display: block;
      box-shadow: 0 4px 20px rgba(133, 193, 233, 0.3);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      animation: fade-in 0.6s ease 1.8s both;
    }

    .gift-card:hover {
      transform: scale(1.03);
      box-shadow: 0 6px 28px rgba(133, 193, 233, 0.45);
    }

    .gift-card:active {
      transform: scale(0.98);
    }

    .gift-card-label {
      font-family: 'Bubblegum Sans', cursive;
      font-size: clamp(1.2rem, 3vw, 1.6rem);
      color: var(--text);
      margin-bottom: 0.8rem;
    }

    .gift-card img {
      width: clamp(220px, 50vw, 340px);
      height: auto;
      border-radius: 10px;
    }

    .gift-card-tap {
      font-size: 1rem;
      color: var(--text-light);
      margin-top: 0.8rem;
    }

    @keyframes bounce-in {
      0% { transform: scale(0.3); opacity: 0; }
      60% { transform: scale(1.08); opacity: 1; }
      100% { transform: scale(1); opacity: 1; }
    }

    @keyframes fade-in {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @keyframes spin-float {
      0%, 100% { transform: rotate(0deg) translateY(0); }
      25% { transform: rotate(5deg) translateY(-8px); }
      75% { transform: rotate(-5deg) translateY(8px); }
    }

    .success-glow {
      position: absolute;
      width: 200px;
      height: 200px;
      border-radius: 50%;
      background: radial-gradient(circle, rgba(133, 193, 233, 0.4) 0%, transparent 70%);
      animation: glow-pulse 2s ease-in-out infinite;
      pointer-events: none;
      z-index: -1;
    }

    @keyframes glow-pulse {
      0%, 100% { transform: scale(1); opacity: 0.5; }
      50% { transform: scale(1.5); opacity: 0.8; }
    }

    /* ============ REDUCED MOTION ============ */
    @media (prefers-reduced-motion: reduce) {
      *, *::before, *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
      }
    }
  </style>
</head>
<body>

  <!-- Floating hearts background -->
  <div id="bg-hearts"></div>

  <!-- Ask Screen -->
  <div id="ask-screen" class="screen active">
    <div class="character"><img src="https://media1.tenor.com/m/Q0HrBqkPlCcAAAAC/naruto-hinata.gif" alt="Young Naruto and Hinata"></div>
    <h1 class="title">Will You Be My Valentine?</h1>
    <p id="subtitle" class="subtitle">Please say yes... pretty please? üíï</p>
    <div class="buttons">
      <button id="btn-yes" class="btn btn-yes">Yes! üíñ</button>
      <button id="btn-no" class="btn btn-no">No</button>
    </div>
  </div>

  <!-- Success Screen -->
  <div id="success-screen" class="screen">
    <div id="confetti-container"></div>
    <div class="success-content">
      <div class="success-glow"></div>
      <div class="success-gif">
        <img src="https://media1.tenor.com/m/28jYXcM0vZAAAAAC/naruto-love.gif" alt="Naruto and Hinata kissing in the snow">
      </div>
      <h1 class="success-title">Yay! I knew you'd say yes!</h1>
      <p class="success-subtitle">I love you ü§óüíï</p>
      <!-- Gift Card -->
      <a href="https://sephora.cashstar.com/gift-card/view/YYuZA6mgI0xho1orHKv2CADjc/" target="_blank" rel="noopener" class="gift-card">
        <p class="gift-card-label">I got you something üéÅ</p>
        <img src="Sephora_Giftcard.png" alt="Sephora Gift Card">
        <p class="gift-card-tap">Tap to open your gift!</p>
      </a>
    </div>
  </div>

  <script>
    // ============ SETUP ============
    const btnYes = document.getElementById('btn-yes');
    const btnNo = document.getElementById('btn-no');
    const subtitle = document.getElementById('subtitle');
    const askScreen = document.getElementById('ask-screen');
    const successScreen = document.getElementById('success-screen');

    let escapeCount = 0;
    const canHover = window.matchMedia('(hover: hover) and (pointer: fine)').matches;

    // ============ FLOATING HEARTS BACKGROUND ============
    (function createFloatingHearts() {
      const container = document.getElementById('bg-hearts');
      const hearts = ['üíï', 'üíó', 'üíì', 'üíñ', '‚ù§Ô∏è', 'ü©∑', 'üíò'];
      const count = 18;

      for (let i = 0; i < count; i++) {
        const span = document.createElement('span');
        span.textContent = hearts[Math.floor(Math.random() * hearts.length)];
        span.style.setProperty('--dur', (6 + Math.random() * 8) + 's');
        span.style.setProperty('--del', (Math.random() * 10) + 's');
        span.style.setProperty('--rot', (Math.random() * 30 - 15) + 'deg');
        span.style.left = (Math.random() * 100) + '%';
        span.style.fontSize = (0.8 + Math.random() * 1.5) + 'rem';
        container.appendChild(span);
      }
    })();

    // ============ YES BUTTON GROW ============
    function growYes() {
      escapeCount++;
      const scale = 1 + escapeCount * 0.1;
      const capped = Math.min(scale, 2.8);
      btnYes.style.setProperty('--yes-scale', capped);

      if (escapeCount === 3) btnYes.textContent = 'Yes! üíñüíñ';
      if (escapeCount === 6) btnYes.textContent = 'YES! üíñüíñüíñ';
      if (escapeCount === 9) btnYes.textContent = 'SAY YES ALREADY üíñ';
    }

    // ============ SUCCESS TRIGGER ============
    function triggerSuccess() {
      askScreen.classList.remove('active');
      successScreen.classList.add('active');
      generateConfetti();
      generateSnowflakes();
    }

    btnYes.addEventListener('click', triggerSuccess);

    // ============ DESKTOP: RUNAWAY NO BUTTON ============
    if (canHover) {
      const ESCAPE_RADIUS = 130;

      document.addEventListener('mousemove', (e) => {
        const rect = btnNo.getBoundingClientRect();
        const cx = rect.left + rect.width / 2;
        const cy = rect.top + rect.height / 2;
        const dist = Math.hypot(e.clientX - cx, e.clientY - cy);

        if (dist < ESCAPE_RADIUS) {
          teleportNo();
          growYes();
        }
      });

      // Fallback: if mouse somehow gets on the button
      btnNo.addEventListener('mouseenter', () => {
        teleportNo();
        growYes();
      });

      function teleportNo() {
        const pad = 80;
        const maxX = window.innerWidth - pad;
        const maxY = window.innerHeight - pad;
        const newX = pad + Math.random() * (maxX - pad * 2);
        const newY = pad + Math.random() * (maxY - pad * 2);

        btnNo.classList.add('runaway');
        btnNo.style.left = newX + 'px';
        btnNo.style.top = newY + 'px';
      }

      // Re-clamp on resize
      window.addEventListener('resize', () => {
        if (btnNo.classList.contains('runaway')) {
          const pad = 80;
          const curLeft = parseFloat(btnNo.style.left);
          const curTop = parseFloat(btnNo.style.top);
          btnNo.style.left = Math.min(curLeft, window.innerWidth - pad) + 'px';
          btnNo.style.top = Math.min(curTop, window.innerHeight - pad) + 'px';
        }
      });
    }

    // ============ MOBILE: ESCALATING MESSAGES ============
    if (!canHover) {
      const messages = [
        "Are you sure? ü§î",
        "Really?? üò¢",
        "You're breaking my heart... üíî",
        "Please??? ü•∫",
        "I'll make you cookies! üç™",
        "I'll cry... üò≠",
        "Think again! üôè",
        "Fine... just kidding, try again! üòú",
        "PLEASE I'm on my knees üßé",
        "Okay but what if I said pretty please? üåπ",
      ];
      let tapCount = 0;

      btnNo.addEventListener('click', (e) => {
        e.preventDefault();
        tapCount++;

        // Shake the subtitle for feedback
        subtitle.style.transform = 'scale(1.05)';
        setTimeout(() => subtitle.style.transform = 'scale(1)', 200);

        // Update message
        const msgIndex = Math.min(tapCount - 1, messages.length - 1);
        subtitle.textContent = messages[msgIndex];

        // Grow yes button
        growYes();

        // Shrink no button after 5 taps
        if (tapCount >= 5) {
          const shrink = Math.max(0.25, 1 - (tapCount - 4) * 0.12);
          btnNo.style.transform = `scale(${shrink})`;
          btnNo.style.opacity = Math.max(0.2, 1 - (tapCount - 4) * 0.12);
        }

        // Auto-trigger after all messages exhausted
        if (tapCount > messages.length) {
          triggerSuccess();
        }
      });
    }

    // ============ CONFETTI GENERATOR ============
    function generateConfetti() {
      const container = document.getElementById('confetti-container');
      const colors = ['#d6eaf8', '#aed6f1', '#85c1e9', '#fff', '#ffc2d1', '#ff6b8a', '#e8daef'];
      const count = 70;

      for (let i = 0; i < count; i++) {
        const piece = document.createElement('div');
        const isHeart = Math.random() < 0.3;
        piece.className = 'confetti-piece' + (isHeart ? ' heart' : '');

        const size = isHeart ? (10 + Math.random() * 14) : (6 + Math.random() * 10);
        piece.style.setProperty('--x', (Math.random() * 100) + 'vw');
        piece.style.setProperty('--size', size + 'px');
        piece.style.setProperty('--color', colors[Math.floor(Math.random() * colors.length)]);
        piece.style.setProperty('--fall-dur', (2 + Math.random() * 3) + 's');
        piece.style.setProperty('--fall-del', (Math.random() * 2) + 's');
        piece.style.setProperty('--sway', (Math.random() * 60 - 30) + 'px');

        if (isHeart) {
          piece.textContent = '‚ù§';
        } else if (Math.random() < 0.5) {
          piece.style.borderRadius = '50%';
        }

        container.appendChild(piece);
      }
    }

    // ============ SNOWFLAKE GENERATOR ============
    function generateSnowflakes() {
      const flakes = ['‚ùÑ', '‚ùÖ', '‚ùÜ', '‚Ä¢'];
      const count = 30;

      for (let i = 0; i < count; i++) {
        const flake = document.createElement('span');
        flake.className = 'snowflake';
        flake.textContent = flakes[Math.floor(Math.random() * flakes.length)];
        flake.style.left = (Math.random() * 100) + '%';
        flake.style.setProperty('--size', (0.6 + Math.random() * 1.2) + 'rem');
        flake.style.setProperty('--dur', (4 + Math.random() * 6) + 's');
        flake.style.setProperty('--del', (Math.random() * 5) + 's');
        flake.style.setProperty('--sway', (Math.random() * 40 - 20) + 'px');
        successScreen.appendChild(flake);
      }
    }
  </script>
</body>
</html>
